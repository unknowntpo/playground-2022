# Justfile for CoinChange solution testing

# Show help (default command)
default: help

# Run all tests
test-all:
    @echo "Running all CoinChange tests..."
    @for test_file in test*.txt; do \
        if [ -f "$test_file" ]; then \
            echo "=== Testing $test_file ==="; \
            cat "$test_file" | OUTPUT_PATH=$(pwd)/output.txt java Solution.java; \
            echo "Result: $(cat output.txt)"; \
            echo ""; \
        fi \
    done

# Run a specific test file
test file:
    @echo "Running test: {{file}}"
    @if [ ! -f "{{file}}" ]; then \
        echo "Error: Test file {{file}} not found"; \
        exit 1; \
    fi
    @cat "{{file}}" | OUTPUT_PATH=$(pwd)/output.txt java Solution.java
    @echo "Result: $(cat output.txt)"

# List all available test files
list-tests:
    @echo "Available test files:"
    @ls -1 test*.txt 2>/dev/null || echo "No test files found"

# Create a new test file
create-test name:
    @echo "Creating test file: test_{{name}}.txt"
    @read -p "Enter test input (format: n m\\ncoin1 coin2 ...): " input; \
    echo "$$input" > "test_{{name}}.txt"
    @echo "Created test_{{name}}.txt"

# Clean output files
clean:
    @rm -f output.txt *.class
    @echo "Cleaned output files"

# Help
help:
    @echo "Available commands:"
    @echo "  test-all        - Run all test files"
    @echo "  test <file>     - Run specific test file"
    @echo "  list-tests      - List available test files"
    @echo "  create-test <name> - Create new test file"
    @echo "  clean           - Remove output and class files"